<!DOCTYPE html>
<html lang="en">
<head lang="zh">
    <script type="text/javascript">
        var _ux21st = (new Date()).getTime();
        (function() {
            var ma = document.createElement('script'); ma.type = 'text/javascript'; ma.async = true;
            ma.src = ('https:' == document.location.protocol ? 'https://ux.21cn.com' : 'http://ux.21cn.com') + '/api/htmlReportRest/getJs.js?pid=FF30850F463C4BD2A86925DEA634ED93';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ma, s);
        })();
    </script>
    <title>账单充值</title>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="apple-touch-fullscreen" content="yes"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>
    <!-- 清除缓存 -->
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <!-- 图标 -->
    <link rel="icon" href="https://static.e.189.cn/e/img/logo_ico.png" type="image/png"/>
    <link rel="shortcut icon" href="https://static.e.189.cn/e/img/logo_ico.png" type="image/png"/>
    <link rel="bookmark" href="https://static.e.189.cn/e/img/logo_ico.png" type="image/png"/>
    <script>
        var _ux21et = (new Date()).getTime();
    </script>
    <script src="../zepto.min.js"></script>
    <script src="../doT.min.js"></script>

</head>
<body>


   <!-- <script src="https://api.douban.com/v2/book/1220562?callback=jsonpCallback">
   </script>
   <script>
      function jsonpCallback(data) {
        console.log(999);
        alert(data);
     };
      window.onload = jsonpCallback(data)
   </script> -->
   <script type="text/javascript">
   // $.getJSON 方式
      // $.getJSON("https://api.douban.com/v2/book/1220562?callback=?", function(data){
      //     console.log(data);
      //     render(data);
      // });

  //  $.ajax() 方式
      $.ajax({
         type : "get",
         asyce : true,
         url : "https://api.douban.com/v2/book/1220562",
         dataType: "jsonp",
         jsonp : "callback",
         // jsonpCallback : "success_jsonpCallback",
         success : function(data) {
            render(data);
            console.log(data)
         },
         error : function(e) {
            console.log(e)
         }
      })

      // $.get() 方式
      // $.get("https://api.douban.com/v2/book/1220562",
      //      function(data) {
      //        render(data);
      //        console.log(data)
      //     },
      //     'jsonp'
      // )

      function render(data) {
         var interText = doT.template($("#interpolationtmpl").text());
         $(".wrapper").html(interText(data))
      }
   </script>
   <script id="interpolationtmpl" type="text/x-dot-template">
      <div>{{=it.rating}}</div>
      <div>{{=it.pubdate}}</div>
      {{ for (var item in it.tags) { }}
         <div>{{=item}}</div>
      {{ } }}
      {{ for (var item in it.images) { }}
         <div>{{=item}}</div>
      {{ } }}
   </script>

<div class="wrapper">
   <h1>jsonp test</h1>
</div>


</body>
</html>
